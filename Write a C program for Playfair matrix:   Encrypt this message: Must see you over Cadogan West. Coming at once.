#include <stdio.h>
#include <string.h>
#include <ctype.h>

#define SIZE 5

void generate_playfair_matrix(char keyword[], char matrix[SIZE][SIZE]) {
    char alphabet[] = "ABCDEFGHIKLMNOPQRSTUVWXYZ"; 
    char key_processed[26] = "";
    int used[26] = {0}; 
    int k = 0, index = 0;

    for (int i = 0; keyword[i] != '\0'; i++) {
        char ch = toupper(keyword[i]);
        if (ch == 'J') ch = 'I'; 
        if (!used[ch - 'A']) {
            key_processed[k++] = ch;
            used[ch - 'A'] = 1;
        }
    }

    for (int i = 0; i < 25; i++) {
        if (!used[alphabet[i] - 'A']) {
            key_processed[k++] = alphabet[i];
            used[alphabet[i] - 'A'] = 1;
        }
    }

    for (int i = 0; i < SIZE; i++) {
        for (int j = 0; j < SIZE; j++) {
            matrix[i][j] = key_processed[index++];
        }
    }
}

void print_matrix(char matrix[SIZE][SIZE]) {
    for (int i = 0; i < SIZE; i++) {
        for (int j = 0; j < SIZE; j++) {
            printf("%c ", matrix[i][j]);
        }
        printf("\n");
    }
}

int main() {
    char keyword[] = "CIPHER";
    char playfair_matrix[SIZE][SIZE];
    
    generate_playfair_matrix(keyword, playfair_matrix);
    printf("Playfair Cipher Matrix:\n");
    print_matrix(playfair_matrix);
    
    return 0;
}
